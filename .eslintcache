[{"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\index.js":"1","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\reportWebVitals.js":"2","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\App.js":"3","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\DrawnDishList.js":"4","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\FileterArr.js":"5","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\components\\Filter.js":"6","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\AddDish.js":"7","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\components\\Ingredients.js":"8","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\Dish.js":"9","C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\UserProducts.js":"10"},{"size":294,"mtime":1611639849721,"results":"11","hashOfConfig":"12"},{"size":362,"mtime":499162500000,"results":"13","hashOfConfig":"12"},{"size":6857,"mtime":1612503104146,"results":"14","hashOfConfig":"12"},{"size":3452,"mtime":1612504108149,"results":"15","hashOfConfig":"12"},{"size":7957,"mtime":1612331012204,"results":"16","hashOfConfig":"12"},{"size":434,"mtime":1611383664413,"results":"17","hashOfConfig":"12"},{"size":4780,"mtime":1611809878354,"results":"18","hashOfConfig":"12"},{"size":349,"mtime":1611984158569,"results":"19","hashOfConfig":"12"},{"size":2078,"mtime":1612504015771,"results":"20","hashOfConfig":"12"},{"size":3843,"mtime":1612413152932,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"r9ujtu",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"24"},"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\index.js",[],["44","45"],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\reportWebVitals.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\App.js",["46","47"],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\DrawnDishList.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\FileterArr.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\components\\Filter.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\AddDish.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\components\\Ingredients.js",[],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\Dish.js",["48"],"C:\\Users\\plazi\\Desktop\\Programowanie\\co na obiad\\co-na-obiad-app\\src\\pages\\UserProducts.js",["49"],"import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"../styles/App.css\";\r\n\r\nconst UserProducts = ({\r\n  allDishes,\r\n  setMatchDishes,\r\n  setIsUserProductsActive,\r\n  setSelectedDish,\r\n}) => {\r\n  const [dishesList, setDishesList] = useState([]);\r\n  const [isActive, setIsActive] = useState(false);\r\n  const [productsFilters, setProductsFilters] = useState([]);\r\n  const [activeFilters, setActiveFilters] = useState([]);\r\n\r\n  const showSection = () => {\r\n    setIsActive((prevValue) => {\r\n      if (prevValue) {\r\n        setDishesList([]);\r\n        setMatchDishes([]);\r\n      } else setSelectedDish(\"\");\r\n\r\n      setIsUserProductsActive(!prevValue);\r\n      return !prevValue;\r\n    });\r\n    allFilters();\r\n  };\r\n  const removeDuplicates = (arr) => {\r\n    let dataArr = arr.map((item) => {\r\n      return [item.name, item];\r\n    }); // creates array of array\r\n    let maparr = new Map(dataArr); // create key value pair from array of array\r\n    let result = [...maparr.values()];\r\n    return result; //converting back to array from mapobject\r\n  };\r\n  const allFilters = () => {\r\n    const dishes = [...allDishes];\r\n    const dishesFiltersArr = dishes\r\n      .map((dish) =>\r\n        dish.ingredient.map((elem) => ({\r\n          name: elem.name,\r\n          active: false,\r\n          id: Math.floor(Math.random() * 123),\r\n        }))\r\n      )\r\n      .flat();\r\n    const singleFiltersArr = removeDuplicates(dishesFiltersArr);\r\n    setProductsFilters(singleFiltersArr);\r\n  };\r\n  const getActiveFilters = (arr) => {\r\n    const activeFilters = arr.filter((element) => element.active);\r\n    return activeFilters;\r\n  };\r\n  const changeActiveStatus = (id) => {\r\n    const filtersArr = [...productsFilters];\r\n    const index = filtersArr.findIndex((filter) => filter.id === id);\r\n\r\n    filtersArr[index].active = !filtersArr[index].active;\r\n    filterDishes(filtersArr[index]);\r\n    setActiveFilters(getActiveFilters(filtersArr));\r\n    setProductsFilters(filtersArr);\r\n  };\r\n  const getMatchedDishes = (arr, name) => {\r\n    const matchArr = [];\r\n    arr.forEach((dish) => {\r\n      let isMatch = false;\r\n      for (let i = 0; i < dish.ingredient.length; i++) {\r\n        if (dish.ingredient[i].name === name) isMatch = true;\r\n      }\r\n      if (isMatch) matchArr.push(dish);\r\n    });\r\n    return matchArr;\r\n  };\r\n  const filterDishes = (filterObj) => {\r\n    const { active, name } = filterObj;\r\n    let selectedDishesArr = [];\r\n    if (active) {\r\n      const dishesArr =\r\n        dishesList.length > 0 ? [...dishesList] : [...allDishes];\r\n      selectedDishesArr = getMatchedDishes(dishesArr, name);\r\n    } else {\r\n      let allDishesArr = [...allDishes];\r\n      const currentFilters = activeFilters;\r\n\r\n      const index = currentFilters.findIndex((item) => item.name === name);\r\n      currentFilters.splice(index, 1);\r\n      if (currentFilters.length === 0) {\r\n        selectedDishesArr = [];\r\n      } else {\r\n        currentFilters.forEach((element) => {\r\n          allDishesArr = getMatchedDishes(allDishesArr, element.name);\r\n        });\r\n\r\n        selectedDishesArr = allDishesArr;\r\n      }\r\n    }\r\n    setDishesList(selectedDishesArr);\r\n    setMatchDishes(selectedDishesArr);\r\n  };\r\n  const filters = productsFilters.map((item) => (\r\n    <li>\r\n      <button\r\n        className={item.active ? \"activeFilter\" : \"\"}\r\n        onClick={() => changeActiveStatus(item.id)}\r\n      >\r\n        {item.name}\r\n      </button>\r\n    </li>\r\n  ));\r\n  const section = isActive && (\r\n    <div>\r\n      <p>Zaznacz poniżej, które produkty już masz</p>\r\n      <ul>{filters}</ul>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <p>czy chesz filtrować po produktach które masz?</p>\r\n\r\n      <button onClick={showSection}>{isActive ? \"wyłącz\" : \"włącz\"}</button>\r\n\r\n      {section}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserProducts;\r\n",{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","severity":1,"message":"55","line":108,"column":17,"nodeType":"56","messageId":"57","endLine":108,"endColumn":23},{"ruleId":"58","severity":1,"message":"59","line":137,"column":6,"nodeType":"60","endLine":137,"endColumn":8,"suggestions":"61"},{"ruleId":"58","severity":1,"message":"62","line":16,"column":46,"nodeType":"60","endLine":16,"endColumn":48,"suggestions":"63"},{"ruleId":"54","severity":1,"message":"64","line":2,"column":10,"nodeType":"56","messageId":"57","endLine":2,"endColumn":14},"no-native-reassign",["65"],"no-negated-in-lhs",["66"],"no-unused-vars","'showMe' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'checkBanStatus'. Either include it or remove the dependency array.","ArrayExpression",["67"],"React Hook useEffect has a missing dependency: 'productsList'. Either include it or remove the dependency array.",["68"],"'Link' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"69","fix":"70"},{"desc":"71","fix":"72"},"Update the dependencies array to be: [checkBanStatus]",{"range":"73","text":"74"},"Update the dependencies array to be: [productsList]",{"range":"75","text":"76"},[4164,4166],"[checkBanStatus]",[436,438],"[productsList]"]